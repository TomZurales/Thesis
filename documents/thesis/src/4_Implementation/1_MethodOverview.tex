\subsection{Method Overview}

This section details our method for achieving the goals laid out in Section \ref{objectives}. The primary objective is to identify map points which, while previously viewed, are no longer visible due to environmental changes. To address this, we assign an incrementally updated probability of existence value to each map point. Observations of a map point increase our overall confidence in its existence. Conversely, failure to observe a map point from a viewpoint where it \textit{should} have been visible lowers our confidence in its existence. Determining whether a map point should be observable from a given viewpoint is not trivial, motivating the need for a viewpoint-aware observability model. The purpose of the model is to integrate historical observability data to estimate observability across all possible viewpoints.

\subsubsection{Viewpoint-Aware Observability of Map Points}

% define what we mean by viewpoint aware observability; a mapping between observation unit direction vector and seen/not seen binary observations

We define viewpoint aware observability as a function
\begin{align*}
    \boldsymbol{f:}\mathbb{S}^2\times\mathbb{R}^+\rightarrow\{0,1\}
\end{align*}
where $\mathbf{v}\in\mathbb{S}^2$ is a unit direction vector pointing from the map point to the observer, and $d\in\mathbb{R}^+$ is the Euclidean distance between the point and observer. The function $\boldsymbol{f}(\mathbf{v}, d)\rightarrow\{0,1\}$ returns 1 if the map point is considered visible from that viewpoint, and 0 otherwise.

% Justify why distance needs to be accounted for, use a diagram to show that by including distance, we can account for occlusions in the model

The inclusion of distance in the model is necessary to handle occlusions in the environment. Figure \ref{fig:enhanced_general_slam_pipeline} shows a situation. By integrating distance data into the model, we can accurately determine whether an observation warrants modifying the point's probability of existence, or if it should be considered occluded.

% Say what we are trying to build; a model which can produce a probability that a point will be seen given an observation direction and a distance

The model must perform two functions: updates and queries. Updates modify the model's internal representation of a map point's observability, while queries ask \"What is the probability that I see the map point from this viewpoint?\". The goal of the model is to provide answers to queries which are as accurate as possible based on the updates received up until that point. With perfect knowledge of the map point's observability across the domain of viewpoints, every query response would be a 0 or a 1, however, this would require infinite observations to produce. Instead, we implement the model probabilistically, allowing a finite number of observations to estimate the point's observability across the domain, and returning a probability of observation in the range [0, 1]. Figure \ref{2d_observability} provides a simplified 2D representation of a map point $\boldsymbol{p}$'s ideal observability.

\subsubsection{Observability Shell Representations}

The observability of a map point can be conceptualized as a unit sphere surrounding each map point. This shell is the structure used to store metadata regarding the point's observability, defining values for

\subsubsection{Existence Probability and Update Rule}

\subsubsection{Application to Point Pruning and Selection}
